# Body Interface

2023年4月から取り組んでいるプロジェクトです。
"全身デバイス"を実現するため段階的に様々な機能をタ名しています。


1. 手でスライド送り

初めに作成しようとしたのが、"指パッチンでスライドを送る"デバイスです。<br>指っパッチンをトリガーにするため、勢いでボタン押下、*パッチン*の音、などを考えましたが、指パッチンのメカニズムを調べてみると、指先や手の腹にモノを入れてしまうとうまく音が出ないとのことでした。よってパッチンではなく、ジェスチャーをトリガーにしようと考えました。<br>ジェスチャーでやるにしても、手段はいくつかあります。まず思いつくのは「モーキャプ」でしょう。しかし私が目指す（好きな）のはウェアラブル。<br>よってとりあえず「**加速度センサ**」を使うことにしました。<br>では次、いかにしてスライドを送りましょう。単純ですが、思いつくのは「キーボード」でした。調べてみると、[ESP32 BLE keyboard.h]なるライブラリがあるではありませんか。よって使うマイコンはESP32です。,,<br>**ESP32でIMUを使いウェアラブルにしたい。**<br>このすべてを解決してくれるものがありました。(持っていた)<br>**M5Stick C Plus**です。<br>そこで数日掛けカタカタ打ちまくった結果.....<br><br>できました。<br><br>![](images/prototype.JPG)<br>
少し見栄えは悪いですが、初号機、プロトタイプとしては十分でしょう。<br>
> - 機能<br>
>
> ボタンを押している間に手を振ると ←/→ のキーコードを送信する。

で、これにショートカットキーなどいろいろ追加してUIとかもいろいろやったのがこれ
![](images/ver1.1.JPG)


2. 手でマウス操作

BLE keyboard.h なるライブラリの作者が BLE mouse.h なるライブラリをも作っていたので次はマウス。(もう一つ有能ライブラリあります。後に続く)<br>1で作った方は、ジェスチャーなのでなんとなくで動き判定を行っていましたが、さすがにマウスとなると、x軸方向y軸方向のカーソル移動を分ける必要があるのでもう少し厳密に加速度センサを扱わなければなりませんね。
そこで観察してみました。<br>![](images/imuwatching.JPG)

航空学科じゃないので詳しくなかったのですが、色々調べながらやったところ、
| \ |手を水平|手を垂直|手首をひねる|
|----|----|----|----|
|上下に振る|gX 変化大<br>gY 変化大|gZ 変化大| / |
|左右に振る|gX 変化大<br>gZ 変化大|gX 変化大| / |
|その他|P,R,Y 安定|R 変化大<br>Y ~-80,80~|gY 変化大|
P,R,Yはピッチ,ロール,ヨー<br>gX,gY,gZは軸の角速度<br><br><br>と分かった。これらを組み込んでやったのが......


<br><br><br><br>こちら。
![](images/)

<br>主に角速度でモーションを検出しているので、実は手首よりも、指につけた方がUX的にいいかもしれない。<br><br><br>とおもい作ったのが....<br>

別のセンサーを使ったこれ。